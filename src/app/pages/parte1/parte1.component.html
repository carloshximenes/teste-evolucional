<div class="p-grid">
  <div class="p-col-12">
    <form [formGroup]="formulario" (submit)="(false)">
      <p-card header="Listar Alunos">
        <div class="p-grid">
          <div class="p-col-12 p-md-4">
            <p-dropdown
              [options]="listaSerie"
              optionLabel="name"
              formControlName="serie"
              placeholder="Selecione uma série"
              [showClear]="true"
            ></p-dropdown>
          </div>
          <div class="p-col-12 p-md-4">
            <p-dropdown
              [options]="listaClasse"
              optionLabel="name"
              formControlName="classe"
              placeholder="Selecione uma classe"
              [showClear]="true"
            ></p-dropdown>
          </div>
          <div class="p-col-6 p-md-2">
            <button
              pButton
              label="Pesquisar"
              class="p-button-success"
              icon="pi pi-search"
              (click)="pesquisar()"
            ></button>
          </div>
          <div class="p-col-6 p-md-2">
            <button
              pButton
              label="Limpar"
              class="p-button-outlined p-button-danger"
              icon="pi pi-trash"
              (click)="limpar()"
            ></button>
          </div>
        </div>
      </p-card>
    </form>
  </div>

  <div class="p-col-12 p-md-8" *ngIf="listaAlunos.length > 0">
    <p-card>
      <p-table
        [value]="listaAlunos"
        [lazy]="true"
        [paginator]="true"
        [rows]="rows"
        [first]="first"
        [totalRecords]="totalRegistros"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="{first} até {last} de {totalRecords} registros"
        [lazyLoadOnInit]="false"
        (onLazyLoad)="pesquisarPorFiltro($event)"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>RA</th>
            <th>Nome</th>
            <th>Série</th>
            <th>Classe</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-aluno>
          <tr>
            <td>{{ aluno.ra }}</td>
            <td>{{ aluno.name }}</td>
            <td>{{ getDescricaoSerie(aluno.degreeId) }}</td>
            <td>{{ getDescricaoClasse(aluno.classId) }}</td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>

  <div class="p-col-12 p-md-4" *ngIf="listaAlunos.length > 0">
    <p-card>
      <div style="display: block">
        <canvas
          baseChart
          [datasets]="barChartData"
          [labels]="barChartLabels"
          [options]="barChartOptions"
          [legend]="barChartLegend"
          [chartType]="barChartType"
        >
        </canvas>
      </div>
      <div class="p-col-12">
        <button
          pButton
          label="Gerar Novos Registros"
          class="p-button-help"
          icon="pi pi-plus"
          (click)="gerarNovosRegistros()"
        ></button>
      </div>
    </p-card>
  </div>
</div>
